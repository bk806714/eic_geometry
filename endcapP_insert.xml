<lccdd>
  <define>
    <include ref="ip6/ip6_defs.xml" /> 
    <include ref="compact/definitions.xml" />
    <include ref="compact/free_parameters.xml"/>

    <constant name="EndcapPInsert_AbsorberThickness" value="1.764*cm"/>
    <constant name="EndcapPInsert_ScintThickness" value="0.3*cm"/>
    <constant name="EndcapPInsert_PCBThickness" value="0.236*cm"/>
  </define>

  <includes>
    <gdmlFile ref="compact/elements.xml"/>
    <gdmlFile ref="compact/materials.xml"/>
  </includes>

  <limits>
  </limits>

  <regions>
  </regions>

  <display>
  <include ref="compact/colors.xml" />
  </display>
  
  <comment> Including the central beampipe </comment>
  <include ref="ip6/beampipe.xml" />

  <detectors>
  
  <comment> 
    These layers currently ignore the air gaps, ESR foil, and scintillator cover. 
    The absorber is made thicker to accomodate for this. 
    Layer is 2.3 cm to match HCal layer width w/o air gaps 
  </comment>
    <detector
      id="EndcapPInsert_ID" 
      name="EndcapPInsert" 
      type="EndcapPInsert"
      readout="HcalEndcapPInsertHits">
        <position x="EndcapPInsert_xpos" y="0*m" z="EndcapPInsert_zmin"/>
        <rotation x="0" y="0" z="0"/>
        <dimensions 
          x="EndcapPInsert_xtotal"
          y="EndcapPInsert_ytotal"
          z="EndcapPInsert_length"/>
        <layer 
          repeat="EndcapPInsert_numLayers" 
          thickness = "EndcapPInsert_AbsorberThickness +
                      EndcapPInsert_ScintThickness +
                      EndcapPInsert_PCBThickness">
          <slice 
            name="Absorber_slice"
            material="Tungsten"
            thickness="EndcapPInsert_AbsorberThickness"
            vis="AnlGray"/>
          <slice 
            name="Scint_slice"
            material="PlasticScint126"
            thickness="EndcapPInsert_ScintThickness"
            vis="AnlOrange"
            sensitive="true"/>
          <slice
            name="PCB_slice"
            material="Fr4"
            thickness="EndcapPInsert_PCBThickness"
            vis="AnlBlue"/>
        </layer>
        <beampipe_region 
          initial_beampipe_radius="EndcapPInsert_opening_radius"
          final_beampipe_radius="EndcapPInsert_final_radius"/>
    </detector>
  </detectors>

  <readouts>
    <readout name="HcalEndcapPInsertHits">
      <segmentation 
        type="CartesianGridXY"
        grid_size_x="3.*cm"
        grid_size_y="3.*cm"/>
      <id>system:8,barrel:3,module:4,layer:8,slice:5,x:32:-16,y:-16</id>  
    </readout>
  </readouts>

  <plugins>
  </plugins>

  <fields>
  </fields>

</lccdd>
